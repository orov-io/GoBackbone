runtime: custom

env: flex

manual_scaling:
  instances: 1

resources:
  cpu: 1
  memory_gb: 0.5
  disk_size_gb: 10

handlers:

  # All URLs are handled by the Go application script
- url: /.*
  script: _go_app

env_variables:
    # See https://godoc.org/github.com/lib/pq
  #
  # Replace INSTANCE_CONNECTION_NAME with the same value as in the
  # beta_settings section below.
  POSTGRES_CONNECTION: "user=postgres password=<pw> dbname=<DBname> host=/cloudsql/<INSTANCE_CONNECTION_NAME>"
  #
  # If you're testing locally using the Cloud SQL proxy with TCP,
  # instead set this environment variable:
  # POSTGRES_CONNECTION="user=postgres password=pw dbname=db sslmode=disable"
  #
  # Gin release mode
  GIN_MODE: release

  # The env
  ENV: prod

  GCLOUD_STORAGE_BUCKET: <storage bucket, if any>

beta_settings:
  cloud_sql_instances: <INSTANCE_CONNECTION_NAME>

endpoints_api_service:
  name: <endpoint_service_name>
  rollout_strategy: managed